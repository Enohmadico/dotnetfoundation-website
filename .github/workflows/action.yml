name: DOTNETFOUNDATION-WEBSITE
run-name: DOTNETFOUNDATION-WEBSITE
on:
    push:
        branches:
            
            - main 
    workflow_dispatch: 
env: 
  DOTNET_ROOT: "."
  WEBAPP_NAME: webap-edwin
jobs:
    build:
        runs-on: windows-latest
        steps:
            - name: üçècheckout step
              uses: actions/checkout@v4
            - name: üçè setup step  
              uses: actions/setup-dotnet@v3
              with:
                dotnet-version: '3.0.x'
            - name: list directory
              run: |
                dir 
            - name: install dependencies 
              run: |
               cd src
               dotnet restore
            - name: build step 
              run: |
                cd src
                dotnet build  --configuration Debug --output ${{env.DONET_ROOT}}/src/custom-output
                write-host "list all the directories"
                dir
            - name: publish step 
              run: dotnet publish src/dotnetfoundation-website.csproj -c Debug -o ./src/custom-output
            - name: List the files in src/custom-output
              run: | 
                Write-Host "Listing the files in ./src/custom-output"
                dir  ./src/custom-output
            - name: upload artifacts
              uses: actions/upload-artifact@v4
              with:
                name: custom-output
                path: ./src/custom-output/**
                if-no-files-found: error 
    
    deploy:
      needs: build
      runs-on: windows-latest
      environment: 
        name: DEVELOPMENT
        url: ${{steps.link.outputs.webapp-url}}
      
      steps:
        - name: Download Artifact
          uses: actions/Download-artifact@v4
          with:
            name: custom-output
            path: it the path that the downloaded artifact will be kept 
        - name: Webdeploy step
          id: link
          uses: azure/webapps-deploy@v2
          with:
            app-name: ${{env.WEBAPP_NAME}}
            publish-profile: ${{ secrets.azureWebAppPublishProfile }}
        - name: display done  deploying in to azure 
          run : |
            write-host " deploy in to azure"
    

    
  

             
                
         
              
                     
             
       
  