name: DOTNETFOUNDATION-WEBSITE
run-name: DOTNETFOUNDATION-WEBSITE
on:
    push:
        branches:
            - main 
    workflow_dispatch: 
env: 
  DOTNET_ROOT: "."
jobs:
    build:
        runs-on: windows-latest
        steps:
            - name: üçècheckout step
              uses: actions/checkout@v4
            - name: üçè setup step  
              uses: actions/setup-dotnet@v3
              with:
                dotnet-version: '3.0.x'
            - name: list directory
              run: |
                dir 
            - name: install dependencies 
              run: |
               cd src
               dotnet restore
            - name: build step 
              run: |
                cd src
                dotnet build  --configuration Debug --output ${{env.DONET_ROOT}}/src/custom-output
                write-host "list all the directories"
                dir 

            # - name: create  foundation folder 
            #   run: |
            #     write-host "DONET_ROOT  is :$env:DOTNET_ROOT "
            #     $path = "$env:DOTNET_ROOT\\foundation"
            #     if (-Not $env:DOTNET_ROOT ){
            #     write-host "DONET_ROOT is not set."
            #     exist 1 
            #     }
                
            #     if(-Not (Test-path -path $path)) {
            #     write-host "creating directory:$path"
            #     new-item -itemtype directory -path $path}
            #     else {
            #     write-host "directory already exist :$path"}
                

            - name: publish step 
              run: dotnet publish src/dotnetfoundation-website.csproj -c Debug -o ./src/custom-output
            - name: List the files in src/custom-output
              run: | 
                Write-Host "Listing the files in ./src/custom-output"
                dir  ./src/custom-output
            # - name: list the files in C:\Program Files\dotnet
            #   run: |
            #     Get-ChildItem -path "${{ github.workspace }}"
            - name: upload artifacts
              uses: actions/upload-artifact@v4
              with:
                name: custom-output
                path: ./src/custom-output
                if-no-files-found: error 


             
                
         
              
                     
             
       
  